<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>ICT Agriculture Extension Services Center</title>
    <meta name="description" content="ICT Agriculture Extension Services Center" />
    <meta name="author" content="Sindh Government" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="images/ictlogo.png" />
    <link rel="stylesheet" type="text/css" href="css/css-font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/css-themify-icons.css" />
    <link rel="stylesheet" type="text/css" href="css/css-simple-line-icons.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <link rel="stylesheet" type="text/css" href="css/css-owl.carousel.css" />
    <link rel="stylesheet" type="text/css" href="css/css-magnific-popup.css" />
    <link rel="stylesheet" type="text/css" href="css/headers-header.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" type="text/css" href="css/css-style.css" />
    <link rel="stylesheet" type="text/css" href="css/css-themes.css" />
    <link rel="stylesheet" type="text/css" href="css/css-responsive.css" />
    <link rel="stylesheet" type="text/css" href="css/home-home-medical.css" />
    <link rel="stylesheet" type="text/css" href="css/custom.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.0/slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.0/slick/slick-theme.css" />
   
    <!-- Poppins font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Akronim&family=Calistoga&family=Irish+Grover&family=Odor+Mean+Chey&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script src="js/js-modernizer.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script> 

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"/>

    <!-- Owl Carousel JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>


    <style>
        .section-title { border-left: 5px solid #28a745; padding-left: 10px; margin-top: 40px; }
        .disease-tag { background: #ffc107; color: #000; border-radius: 5px; padding: 13px 30px; margin: 3px; display: inline-block; font-size: 14px; }
        .nav-tabs .nav-link {color: #000; /* Black text by default */}
        /* .nav-tabs .nav-link.active {color: #28a745 !important; Green text for active tab} */
  </style>
</head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" defer></script>
<body>
    <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center w-100 py-4 bg-light logo-div">
                <!-- Left logo -->
                <a class="navbar-brand px-3" href="index.html">
                    <img src="./images/ictlogo.png" alt="logo" class="logo">
                </a>
                <div class="text-center">
                    <h2 class="text-success fw-semibold">ICT AGRICULTURAL EXTENSION SERVICE CENTER</h2>
                    <p class="paragraph">
                        Agriculture, Supply & Prices Department Government of Sindh
                        Directorate General Agriculture Extension Sindh Hyderabad
                    </p>
                </div>
                <!-- Right logos -->
                <div class="me-4">
                    <img src="./images/footer-logos.png" alt="" height="70px" style="width: 170px;" class="footer-logos">
                </div>
            </div>

         <!-- Navbar -->
            <nav class="navbar navbar-expand-lg bg-white sticky-top py-4">
                <div class="container-fluid">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                        <ul class="navbar-nav" style="font-size: small;">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="crops.html">Crops</a>
                            </li>
                            <li class="nav-item"><a class="nav-link" href="districts.html">District Offices</a></li>
                            <li class="nav-item"><a class="nav-link" href="updates.html">News</a></li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    Publication
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown" style="font-size: smaller;">
                                    <li><a class="dropdown-item" href="field-guide.html">Field Guide</a></li>
                                    <li><a class="dropdown-item" href="booklets.html">Booklet</a></li>
                                    <li><a class="dropdown-item" href="agri-pub.html">Agri Publication</a></li>
                                </ul>
                            </li>
                            <li class="nav-item"><a class="nav-link" href="sindh-zarat.html">Sindh Zarat</a></li>
                            <li class="nav-item">
                                <a class="nav-link" href="videos.html">Videos</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="gallery.html">Gallery</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    Tenders
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown" style="font-size: smaller;">
                                    <li><a class="dropdown-item" href="https://ictagriculture.gos.pk/images/RequestforExpressionofInterestSelectionofFirmForMeetinqArrangementfStationaryNenuePAsystem.pdf">REOI For Venue/PA System</a></li>
                                    <li><a class="dropdown-item" href="https://ictagriculture.gos.pk/images/Final-%20SWAT%20-%20ADU%20PIC%20ToRs%20-%20May%2009,%202023.pdf">ADU SWAT Region</a></li>
                                    <li><a class="dropdown-item" href="https://ictagriculture.gos.pk/images/delivaryunit.pdf">Procurement of Vehicles</a></li>
                                    <li><a class="dropdown-item" href="https://ictagriculture.gos.pk/images/WBG%20Reviewed%20ADU_SWAT_REOI%20PIC_Final%20Version.docx">ADU PIC TORS</a></li>
                                    <li><a class="dropdown-item" href="https://ictagriculture.gos.pk/images/TORs%20of%20Project%20Director_AD_SWAT%20finalized_2352023_PCMU.pdf">TORS of PD_AD_SWAT</a></li>
                                    <li><a class="dropdown-item" href="https://ictagriculture.gos.pk/images/PD%20ToRs%20Readvertised.pdf">PD Tors Readvertised</a></li>
                                    <li><a class="dropdown-item" href="https://ictagriculture.gos.pk/images/RFQ_for_Furniture_Fixture.pdf">RFQ for furniture & Fixture</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
    </div>

    <div class="container alexandra-container">
        <!-- <h1 class="text-center mb-5 display-4 text-success"></h1> -->
        <div class="row g-4 after-row" id="crop-detail-section">
            <h2 class="text-center fw-bold mb-4" id="crop-heading"></h2>
            <div class="col-md-5">
                <img id="crop-image" src="" alt="Crop Image" class="img-fluid rounded shadow alexandra">
            </div>
            <div class="col-md-7">
                <div class="info-box details">
                    <p><strong>Crop Detail:</strong> <span id="crop-detail-text"></span></p>
                    <table class="table table-bordered table-responsive">
                        <thead class="table-light" id="crop-table-head">
                            <tr>
                                <th>Property</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody id="crop-table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- <div class="row g-4 after-row">
            <div class="col-md-5">
                <img src="./images/crop.jpg" alt="Alexandra Palm" class="img-fluid rounded shadow alexandra">
            </div>
            <div class="col-md-7">
                <div class="info-box details">
                    <p><strong>Crop Detail:</strong> Alexandra Palm is a palm native to Queensland, Australia. It grows in the littoral rainforest, often in locations that are severely inundated during heavy rain events. Their ability to withstand these conditions allow them to become the dominant species.</p>

                    <table class="table table-bordered">
                        <thead class="table-light group">
                            <tr>
                                <th class="fs-5">Major/Minor</th>
                                <td>Major</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Temporary/Permanent</th>
                                <td>Permanent</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Category</th>
                                <td>Agriculture Extension</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Type</th>
                                <td>Ornamentals</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Climate</th>
                                <td>Sub Tropical</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Irrigation</th>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Duration</th>
                                <td>Perennial</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Economic Title</th>
                                <td>Cash Crop</td>
                            </tr>
                            <tr>
                                <th class="fs-5">Growing Season</th>
                                <td>Kharif / Rainy / Monsoon Crops</td>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div> -->

        <h4 class="section-title mt-5 fw-bold variaties">🛠️ Management</h4>
        <div class="row text-center managament-row">
            <div class="col-12 col-md-4 col-sm-6 py-3 fw-bold nutrition">
                <a href="#" data-id="plantNutrition" data-bs-toggle="modal" data-bs-target="#nutritionModal" class="info-box text-decoration-none text-black">🌱 Plant Nutrition</a>
            </div>
            <div class="col-12 col-md-4 col-sm-6 py-3 fw-bold crop-management">
                <a href="#" data-id="cropManagement" data-bs-toggle="modal" data-bs-target="#managementModal" class="info-box text-decoration-none text-black">🌾 Crop Management</a>
            </div>
            <div class="col-12 col-md-4 col-sm-6 py-3 fw-bold others">
                <a href="#" data-id="othersManagement" data-bs-toggle="modal" data-bs-target="#othersModal" class="info-box text-decoration-none text-black">📌 Others Management</a>
            </div>
        </div>

        <div class="row my-5">
            <div class="card-group disease-card">
                <div class="col-12 col-md-4 col-sm-4">
                    <div class="card"></div>
                </div>
                <div class="col-12 col-md-4 col-sm-4">
                    <div class="card"></div>
                </div>
                <div class="col-12 col-md-4 col-sm-4">
                    <div class="card"></div>
                </div>
            </div>
        </div>

        <div class="row my-5">
            <div class="card-group disease-card">
                <div class="col-12 col-md-4 col-sm-4">
                    <div class="card"></div>
                </div>
                <div class="col-12 col-md-4 col-sm-4">
                    <div class="card"></div>
                </div>
                <div class="col-12 col-md-4 col-sm-4">
                    <div class="card"></div>
                </div>
            </div>
        </div>
    </div>


    <div class="container-fluid">
            <section id="footer" class="foot px-4" style="background-image: url(./images/brush-down.png); background-repeat: no-repeat;">
                <div class="row text-white"  >
                    <div class="col-12 col-md-4 py-5 text">
                        <h3>ICT Agricultural</h3>
                        <p class="py-2" style="font-size: small;">Agriculture Extension Services are the main source of farmers advisory services in Sindh Province. These are mostly provided through face-to-face methods.</p>
                        <ul class="icons">
                            <li><a href="#"><span class="fab fa-facebook-f"></span></a></li>
                            <li><a href="#"><span class="fab fa-twitter"></span></a></li>
                            <li><a href="#"><span class="fab fa-instagram"></span></a></li>
                            <li><a href="#"><span class="fab fa-github"></span></a></li>
                            <li><a href="#"><span class="fab fa-youtube"></span></a></li>
                        </ul>
                    </div>
                    <div class="col-12 col-md-4 py-5 links">
                        <h3 class="px-5">Explore</h3>
                        <div class="py-2 px-5">
                            <a href="about-us" class="text-white text-decoration-none" style="font-size: small;">About Us</a>
                        </div>
                        <div class="px-5">
                            <a href="" class="text-white text-decoration-none" style="font-size: small;">Our Team</a>
                        </div>
                        <div class="py-2 px-5">
                            <a href="" class="text-white text-decoration-none" style="font-size: small;">Our Crops</a>
                        </div>
                        <div class="px-5">
                            <a href="" class="text-white text-decoration-none" style="font-size: small;">Districts</a>
                        </div>
                        <div class="py-2 px-5">
                            <a href="" class="text-white text-decoration-none" style="font-size: small;">Services</a>
                        </div>
                        <div class="px-5">
                            <a href="" class="text-white text-decoration-none" style="font-size: small;">Gallery</a>
                        </div>
                        <div class="py-2 px-5">
                            <a href="" class="text-white text-decoration-none" style="font-size: small;">Director Information</a>
                        </div>
                    </div>
                    <div class="col-12 col-md-4 py-5 contact1">
                        <h3>Contact Us</h3>
                        <div class="py-2 contact">
                            <p class="text-white"  style="font-size: smaller; font-weight: bold;">Email: <a href="mailto:info@ictagrisindh.gov.pk" class="text-white fw-normal text-decoration-none">info@ictagrisindh.gov.pk</a> </p>
                            <p class="text-white"  style="font-size: smaller; font-weight: bold;">Phone: <a href="https://wa.me/+92-3111646111" class="text-white fw-normal text-decoration-none">+92-3111646111</a> </p>
                            <h5 class="text-white">We are open</h5>
                            <p class="text-white" style="font-size: smaller;">Monday - Friday : 09:00 AM to 05:00 PM </p>
                            <p class="text-white" style="font-size: smaller;">Saturday - Sunday : Closed</p>
                        </div>
                    </div>
                </div>
                <hr class="line">
                <div class="row text-white copyright">
                    <div class="col-12 col-md-6">
                        <p style="font-size: smaller;">Powered By <a href="" class="text-white">XCL Technologies</a></p>
                    </div>
                    <div class="col-12 col-md-6">
                        <h6 style="font-size: smaller;">&copy; 2023 ICT Agricultural Extension Services Center Sindh. - All Copyrights Reserved</h6>
                    </div>
                </div>
            </section>
    </div>



    <div class="modal fade" id="nutritionModal" tabindex="-1" aria-labelledby="nutritionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-custom-lg">
            <div class="modal-content shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="nutritionModalLabel">Plant Nutrition</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <!-- API content will be loaded here -->
                        <!-- <div class="text-center py-5">
                            <div class="spinner-border text-success" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p>Loading plant nutrition data...</p>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="modal fade" id="cropModal" tabindex="-1" aria-labelledby="cropModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="nutritionModalLabel">Alexandra Palm, Crop Management</h5>
                    <button type="button"  class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Land Preparation</h4>
                        <ul>
                            <li><strong>Create planting hole</strong></li>
                            <p class="fst-italic text-muted"> Detail: Dig holes that are wider and slightly shallower than the root ball of the palm.</p>
                            <li><strong>leveling</strong></li>
                            <p class="fst-italic text-muted">Detail:</p>
                            <li><strong>Plough land thoroughly for two to three times and bring soil to fine tilth. After leveling of soil, dig pits of 1m x 1m x 1m size in summer month.</strong></li> <br>
                            <li><strong>Keep open these pits for two weeks and then fill it with well decomposed cowdung and fertile soil</strong> </li>
                            <p class="fst-italic text-muted">Detail:</p>
                            <li><strong>Soil testing</strong></li>
                            <p class="fst-italic text-muted">Detail: Conduct a soil test to understand the nutrient composition and pH level of the soil.</p>
                            <li><strong>Tillage</strong></li>
                            <p class="fst-italic text-muted">Detail:</p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Sowing Method</h4>
                        <ul>
                            <li><strong>Plant the Alexandra Palm seeds about 1 to 2 inches deep in the soil.</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Sowing Time</h4>
                        <ul>
                            <li><strong>February - March.</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Row - Row Distance</h4>
                        <ul>
                            <li><strong>7.8 meters between rows</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Plant - Plant Distance</h4>
                        <ul>
                            <li><strong>5 or 6 feet apart.</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Irrigation</h4>
                        <ul>
                            <li><strong>You should plan to water this plant about once every week or once every other week.</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Harvesting</h4>
                        <ul>
                            <li><strong>Harvesting.</strong></li>
                            <p class="fst-italic text-muted"> Detail: Alexandra Palms are typically grown as ornamental plants, and they are not typically harvested for consumption. However, if you are referring to the collection of seeds for propagation, wait until the fruit is mature and has turned a bright color. Collect the seeds from the fruit. </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Pruning</h4>
                        <ul>
                            <li><strong>Pruning.</strong></li>
                            <p class="fst-italic text-muted"> Detail: Regular pruning helps maintain the palm's shape and removes dead or damaged fronds. Prune away any yellowing or browning fronds using clean and sharp pruning tools. </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Cutting</h4>
                        <ul>
                            <li><strong>Cutting.</strong></li>
                            <p class="fst-italic text-muted"> Detail: Set a clean, sharp knife or pruning shears to make a clean cut. The cutting should typically be around 6-12 inches long and include a portion of the stem with a node. </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Spraying</h4>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

    <div class="modal fade" id="managementModal" tabindex="-1" aria-labelledby="managementModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-custom-lg">
            <div class="modal-content shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="managementModalLabel">Crop Management</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <!-- API content will be loaded here -->
                        <div class="text-center py-5">
                            <div class="spinner-border text-success" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p>Loading crop management data...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="othersModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-custom-lg">
            <div class="modal-content shadow">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title">Others Management</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="border p-4">
                <!-- Content will load here -->
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- <div class="modal fade" id="otherModal" tabindex="-1" aria-labelledby="otherModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="nutritionModalLabel">Alexandra Palm, Others Management</h5>
                    <button type="button"  class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Climate</h4>
                        <ul>
                            <li><strong>Alexandra Palms are tropical and subtropical plants, so they thrive in warm and humid conditions</strong></li>
                            <p class="fst-italic text-muted"> Detail:</p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Storage</h4>
                        <ul>
                            <li><strong>Storage.</strong></li>
                            <p class="fst-italic text-muted"> Detail: If you need to store seeds, ensure they are fully dried before storage. Store seeds in a cool, dry place in an airtight container or sealed bag to prevent moisture.</p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Marketing</h4>
                        <ul>
                            <li><strong>Its sale in nursery for in high range.</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Row - Row Distance</h4>
                        <ul>
                            <li><strong>7.8 meters between rows</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Rouging</h4>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Inter Cropping</h4>
                        <ul>
                            <li><strong>Intercrop some differnet ornimental plant.</strong></li>
                            <p class="fst-italic text-muted"> Detail: </p>
                        </ul>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="border p-4">
                        <h4 class="mb-3">Seed Soaking</h4>
                        <ul>
                            <li><strong>Seed Soaking.</strong></li>
                            <p class="fst-italic text-muted"> Detail: Soaking seeds before planting can help soften the seed coat and promote germination. Soak seeds in warm water for 24 to 48 hours before planting. </p>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div> -->




     <!-- Modal -->
    <!-- <div class="modal fade" id="palmWeevilModal" tabindex="-1" aria-labelledby="palmWeevilLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="palmWeevilLabel">Palm Weevils</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column -
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/palm.jpg" alt="Palm Weevil" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column -
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Sucking Pests</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Novacide<br><small class="text-muted fst-italic">Use as per label</small></li>
                                <li>Furadan<br><small class="text-muted fst-italic">Use as per label</small></li>
                                <li>Pimicid<br><small class="text-muted fst-italic">Use as per label</small></li>
                                <li>Mocap<br><small class="text-muted fst-italic">Use as per label</small></li>
                                <li>Dursban<br><small class="text-muted fst-italic">Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -
    <div class="modal fade" id="scaleInsectsModal" tabindex="-1" aria-labelledby="scaleInsectsLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="scaleInsectsLabel">Scale Insects</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column -
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/scale.jpg" alt="Scale Insects" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column -
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Sucking Pests</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul class="">
                                <li>Larsbin 40EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Helmet 40EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Coast 40EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- Modal -
    <div class="modal fade" id="spiderMitesModal" tabindex="-1" aria-labelledby="spiderMitesLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="spiderMitesLabel">Spider Mites</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column -
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/spider.jpg" alt="Spider Mites" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column -
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Sucking Pests</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul class="">
                                <li>Nesoran<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Oberan<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Gold star<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Fluid<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Paradabin<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Galop20WG<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- Modal -
    <div class="modal fade" id="aphidsModal" tabindex="-1" aria-labelledby="aphidsLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="aphidsLabel">Aphids</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column -
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/aphids.jpg" alt="Spider Mites" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column -
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Sucking Pests</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Amidacloparid<br><small class="text-muted fst-italic">Usage: 150/200 ml per acre</small></li>
                                <li>Metasystox<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Carbosulphon<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Actara<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Confidar<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Talent<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Crown<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Mospelan<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- Modal -
    <div class="modal fade" id="caterpillarsModal" tabindex="-1" aria-labelledby="caterpillarsLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="caterpillarsLabel">Caterpillars</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column -
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/cater.jpg" alt="Caterpillars" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column --
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Sucking Pests</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Timersuper<br><small class="text-muted fst-italic">Usage: 150/200 ml per acre</small></li>
                                <li>NeuralD505EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Match5EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Stward<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Bakser2.5EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Fighter133EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Smart33DG<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Tall star<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Vollium flexy<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Coragen<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="mealybugModal" tabindex="-1" aria-labelledby="mealybugLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="mealybugLabel">Mealybug</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column -
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/mealy.jpg" alt="Mealybug" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column -
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Sucking Pests</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Actara<br><small class="text-muted fst-italic">Usage: 150/200 ml per acre</small></li>
                                <li>Border<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Coast<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Tall star<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Mospelan<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Curacron500EC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="antsModal" tabindex="-1" aria-labelledby="antsLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="antsLabel">Ants</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column -
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/ants.jpg" alt="Ants" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column 
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Sucking Pests</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Furadon<br><small class="text-muted fst-italic">Usage: 150/200 ml per acre</small></li>
                                <li>Regent<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Fipronil50AC<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Helmet<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Rashem<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="allWeedsModal" tabindex="-1" aria-labelledby="allWeedsLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="allWeedsLabel">All Weeds</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column 
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/weeds.1.jpg" alt="All Weeds" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column -
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Weeds</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Weeds are removing by hoeing and weedicides spray<br><small class="text-muted fst-italic">Usage: </small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="leafBlightModal" tabindex="-1" aria-labelledby="leafBlightLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="leafBlightLabel">Leaf Blight</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column 
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/leaf.jpg" alt="Leaf Blight" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column 
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Fungal Diseases</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Topsin-M<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Cabrio Top<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Nanok<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Revous E<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="leafSpotModal" tabindex="-1" aria-labelledby="leafSpotLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg custom-modal">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="leafSpotLabel">Leaf Spot</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body">
                    <div class="row align-items-center">
                        <!-- Image Column 
                        <div class="col-md-5 mb-3 mb-md-0 text-center">
                            <img src="./images/leaf.jpg" alt="Leaf Spot" class="img-fluid rounded shadow palm-img">
                        </div>

                        <!-- Info Column 
                        <div class="col-md-7 information">
                            <h6 class="fw-bold">Disease Type:</h6>
                            <p class=" mb-3">Fungal Diseases</p>

                            <h6 class="fw-bold">Control Measures:</h6>
                            <ul>
                                <li>Thiophanate Methyl<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Chlorothalonil<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Ferbam<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                                <li>Mancozeb<br><small class="text-muted fst-italic">Usage: Use as per label</small></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

<!-- Add this at the end of your body -->
<div id="modal-container"></div>

<!-- 

<script>
        document.addEventListener('DOMContentLoaded', function() {
            const cropCardsContainer = document.getElementById('crop-cards-container');
            const loadingMessage = document.getElementById('loading-message');
            const cropDetailSection = document.getElementById('crop-detail-section');
            const cropImage = document.getElementById('crop-image');
            const cropDetailText = document.getElementById('crop-detail-text');
            const cropTableBody = document.getElementById('crop-table-body');

            const apiUrl = 'https://cms.ictagriculture.gos.pk/api/crops';
            const imageUrlBase = 'https://cms.ictagriculture.gos.pk/public/images/crops/'; // Base URL for crop images

            let allCropsData = []; // Store fetched data globally for easy access

            // Function to parse the details_type_json string
            function parseDetails(jsonString) {
                try {
                    return JSON.parse(jsonString);
                } catch (e) {
                    console.error("Error parsing JSON string:", jsonString, e);
                    return [];
                }
            }

            // Function to display details of a specific crop in the detail section
            function showCropDetails(crop) {
                cropDetailSection.style.display = 'flex'; // Show the detail section
                
                // Construct the full image URL
                cropImage.src = imageUrlBase + crop.crop_image;
                cropImage.alt = crop.crop_name + " Image";

                cropDetailText.textContent = crop.crop_details;

                // Populate the table
                const details = parseDetails(crop.details_type_json);
                let tableRowsHtml = '';
                
                // Define the order of properties and their display names
                const displayOrder = {
                    'Major/Minor': 'Classification',
                    'Temporary/Permanent': 'Temporary/Permanent',
                    'Category': 'Category',
                    'Type': 'Type',
                    'Crop Climate Title': 'Climate',
                    'Crop Water Method Title': 'Water Method',
                    'Crop Duration': 'Duration',
                    'Crop Economic Title': 'Economic Role',
                    'Crop Growing Season': 'Growing Season'
                };

                for (const key in displayOrder) {
                    const foundDetail = details.find(d => d.type === key);
                    if (foundDetail) {
                        tableRowsHtml += `
                            <tr>
                                <td><strong>${displayOrder[key]}</strong></td>
                                <td>${foundDetail.name}</td>
                            </tr>
                        `;
                    }
                }
                
                cropTableBody.innerHTML = tableRowsHtml;

                // Smooth scroll to the detail section
                cropDetailSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }


            // Function to create a Bootstrap card for a single crop
            function createCropCard(crop) {
                const cardCol = document.createElement('div');
                cardCol.classList.add('col');

                const card = document.createElement('div');
                card.classList.add('card');

                card.innerHTML = `
                    <div class="card-header-custom">
                        ${crop.crop_name}
                    </div>
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">${crop.crop_name}</h5>
                        <p class="card-text flex-grow-1">${crop.crop_details.substring(0, 150)}...</p> <button type="button" class="btn btn-success mt-auto view-details-btn" data-crop-id="${crop.id}">View Details</button>
                    </div>
                `;
                
                cardCol.appendChild(card);
                return cardCol;
            }

            // Fetch data from the API
            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    loadingMessage.style.display = 'none'; // Hide loading message
                    if (data.status === 'success' && data.data.length > 0) {
                        allCropsData = data.data; // Store fetched data
                        
                        allCropsData.forEach(crop => {
                            const cardElement = createCropCard(crop);
                            cropCardsContainer.appendChild(cardElement);
                        });

                        // Attach event listeners to all "View Details" buttons
                        document.querySelectorAll('.view-details-btn').forEach(button => {
                            button.addEventListener('click', function() {
                                const cropId = parseInt(this.dataset.cropId);
                                const selectedCrop = allCropsData.find(crop => crop.id === cropId);
                                if (selectedCrop) {
                                    showCropDetails(selectedCrop);
                                }
                            });
                        });

                    } else {
                        cropCardsContainer.innerHTML = '<div class="col-12 text-center text-danger">No crop data available.</div>';
                    }
                })
                .catch(error => {
                    console.error('Error fetching crops:', error);
                    loadingMessage.style.display = 'none'; // Hide loading message even on error
                    cropCardsContainer.innerHTML = `<div class="col-12 text-center text-danger">Failed to load crops. Please try again later.</div>`;
                });
        });
</script> -->


<script>
document.addEventListener('DOMContentLoaded', function () {
    const cropDetailSection = document.getElementById('crop-detail-section');
    const cropImage = document.getElementById('crop-image');
    const cropDetailText = document.getElementById('crop-detail-text');
    const cropTableBody = document.getElementById('crop-table-body');
    const apiUrl = 'https://cms.ictagriculture.gos.pk/api/crops';
    const imageBase = 'https://cms.ictagriculture.gos.pk/public/crops/';

    // Get ID from URL
   const getCropIdFromUrl = () => {
    const params = new URLSearchParams(window.location.search);
    return params.has('crop_id') ? parseInt(params.get('crop_id'), 10) : null;
};



    // Parse detail JSON safely
    const parseDetails = (jsonString) => {
        try {
            return JSON.parse(jsonString);
        } catch {
            return [];
        }
    };

    // Show crop details in DOM
    const showCropDetails = (crop) => {
    document.getElementById('crop-heading').textContent = crop.crop_name;
    cropImage.src = imageBase + crop.crop_image;
    cropImage.alt = crop.crop_name + ' Image';
    cropDetailText.textContent = crop.crop_details;

    const orderMap = {
        'Major/Minor': 'Classification',
        'Temporary/Permanent': 'Temporary/Permanent',
        'Category': 'Category',
        'Type': 'Type',
        'Crop Climate Title': 'Climate',
        'Crop Water Method Title': 'Water Method',
        'Crop Duration': 'Duration',
        'Crop Economic Title': 'Economic Role',
        'Crop Growing Season': 'Growing Season'
    };

    const details = parseDetails(crop.details_type_json);
    cropTableBody.innerHTML = details
        .filter(d => orderMap[d.type])
        .map(d => `
            <tr>
                <td><strong>${orderMap[d.type]}</strong></td>
                <td>${d.name}</td>
            </tr>
        `).join('');

    cropDetailSection.style.display = 'flex';
    cropDetailSection.scrollIntoView({ behavior: 'smooth' });
};

    // Main fetch logic
    const cropId = getCropIdFromUrl();
    if (cropId) {
        fetch(apiUrl)
            .then(res => res.json())
            .then(data => {
                if (data.status === 'success') {
                    const found = data.data.find(c => c.id === cropId);
                    if (found) {
                        showCropDetails(found);
                    } else {
                        cropDetailSection.innerHTML = `<p class="text-danger text-center">Crop not found.</p>`;
                    }
                } else {
                    cropDetailSection.innerHTML = `<p class="text-danger text-center">No crop data available.</p>`;
                }
            })
            .catch(err => {
                console.error('Fetch error:', err);
                cropDetailSection.innerHTML = `<p class="text-danger text-center">Failed to load crop data.</p>`;
            });
    } else {
        cropDetailSection.innerHTML = `<p class="text-warning text-center">No crop ID specified in the URL.</p>`;
    }
});
</script>

<script>
 document.addEventListener('DOMContentLoaded', function() {
  // Get crop_id from URL
  const urlParams = new URLSearchParams(window.location.search);
  const cropId = urlParams.get('crop_id');
  
  // Get the Plant Nutrition link
  const nutritionLink = document.querySelector('.nutrition a');
  
  if (nutritionLink) {
    nutritionLink.addEventListener('click', function(e) {
      e.preventDefault();
      
      if (!cropId) {
        showError('No crop selected. Please select a crop first.');
        return;
      }
      
      // Show modal immediately (Bootstrap will handle this via data attributes)
      loadNutritionData(cropId);
    });
  }
});

async function loadNutritionData(cropId) {
  const apiUrl = 'https://cms.ictagriculture.gos.pk/api/crop-management';
  const modalContent = document.querySelector('#nutritionModal .modal-body .border');

  // Show loading state
  modalContent.innerHTML = `
    <div class="text-center py-5">
      <div class="spinner-border text-success" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p>Loading plant nutrition data for crop ID: ${cropId}...</p>
    </div>
  `;

  try {
    // Fetch with cache busting
    const response = await fetch(`${apiUrl}?_=${new Date().getTime()}`);
    
    if (!response.ok) {
      throw new Error(`Server returned ${response.status} status`);
    }
    
    const data = await response.json();
    console.log('API Response:', data); // Debug log
    
    // Verify response structure
    if (!data.data || !Array.isArray(data.data)) {
      throw new Error('Invalid API response format');
    }
    
    // Filter for current crop's plant nutrition data
    const nutritionData = data.data.filter(
      item => item.crop_id === cropId && item.management_type === 'plantNutrition'
    );
    
    if (nutritionData.length === 0) {
      throw new Error(`No plant nutrition data found for crop ID: ${cropId}`);
    }
    
    // Combine all nutrition entries
    let htmlContent = '';
    nutritionData.forEach(item => {
      htmlContent += item.management_details;
    });
    
    // Update modal content
    modalContent.innerHTML = `
      <div class="crop-nutrition-content">
        ${htmlContent}
      </div>
    `;
    
  } catch (error) {
    console.error('Error loading nutrition data:', error);
    showError(error.message);
  }
}

function showError(message) {
  const modalContent = document.querySelector('#nutritionModal .modal-body .border');
  modalContent.innerHTML = `
    <div class="alert alert-danger">
      <h5>Error Loading Data</h5>
      <p>${message}</p>
      <div class="text-center mt-3">
        <button class="btn btn-success" onclick="window.location.reload()">
          <i class="fas fa-sync-alt"></i> Refresh Page
        </button>
      </div>
    </div>
  `;
}
</script>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const urlParams = new URLSearchParams(window.location.search);
  const cropId = urlParams.get('crop_id');
  const managementLink = document.querySelector('.crop-management a');

  if (managementLink) {
    managementLink.addEventListener('click', function(e) {
      e.preventDefault();
      if (!cropId) {
        showManagementError('Please select a crop first');
        return;
      }
      loadCropManagementData(cropId);
    });
  }
});

async function loadCropManagementData(cropId) {
  const apiUrl = 'https://cms.ictagriculture.gos.pk/api/crop-management';
  const modalContent = document.querySelector('#managementModal .modal-body .border');

  // Show loading state
  modalContent.innerHTML = `
    <div class="text-center py-5">
      <div class="spinner-border text-success" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p>Loading crop management data...</p>
    </div>
  `;

  try {
    const response = await fetch(`${apiUrl}?_=${new Date().getTime()}`);
    if (!response.ok) throw new Error(`Server error: ${response.status}`);
    
    const data = await response.json();
    
    // Filter ONLY cropManagement type for current crop
    const managementData = data.data.filter(item => 
      item.crop_id === cropId && 
      item.management_type === 'cropManagement'
    );

    if (managementData.length === 0) {
      throw new Error('No crop management data available');
    }

    // Display the data
    modalContent.innerHTML = `
      <div class="crop-management-content">
        ${managementData[0].management_details}
      </div>
    `;

  } catch (error) {
    console.error('Failed to load management data:', error);
    showManagementError(error.message);
  }
}

function showManagementError(message) {
  const modalContent = document.querySelector('#managementModal .modal-body .border');
  modalContent.innerHTML = `
    <div class="alert alert-danger">
      <h5>Error</h5>
      <p>${message}</p>
      <button class="btn btn-sm btn-success mt-2" onclick="loadCropManagementData('${new URLSearchParams(window.location.search).get('crop_id')}')">
        Try Again
      </button>
    </div>
  `;
}
</script>


<script>
    // Global variable to track modal state
let othersModalInstance = null;

document.addEventListener('DOMContentLoaded', function() {
  // Initialize modal only once
  const othersModalElement = document.getElementById('othersModal');
  
  // Clean up any existing modal instance
  if (othersModalInstance) {
    othersModalInstance.dispose();
  }

  // Create new modal instance with proper configuration
  othersModalInstance = new bootstrap.Modal(othersModalElement, {
    backdrop: true, // Enable backdrop
    keyboard: true, // Allow ESC key to close
    focus: true    // Focus on modal when shown
  });

  // Reset modal content when hidden
  othersModalElement.addEventListener('hidden.bs.modal', function() {
    const modalContent = document.querySelector('#othersModal .modal-body .border');
    modalContent.innerHTML = `
      <div class="text-center py-5">
        <p>Select "Other Details" to view information</p>
      </div>
    `;
  });

  // Handle click event for others link
  const othersLink = document.querySelector('.others a');
  if (othersLink) {
    othersLink.addEventListener('click', function(e) {
      e.preventDefault();
      const cropId = new URLSearchParams(window.location.search).get('crop_id');
      
      if (!cropId) {
        showOthersError('No crop selected. Please select a crop first.');
        return;
      }
      
      loadOthersManagementData(cropId);
    });
  }
});

async function loadOthersManagementData(cropId) {
  const apiUrl = 'https://cms.ictagriculture.gos.pk/api/crop-management';
  const modalContent = document.querySelector('#othersModal .modal-body .border');

  // Show loading state
  modalContent.innerHTML = `
    <div class="text-center py-5">
      <div class="spinner-border text-success" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p>Loading other management data...</p>
    </div>
  `;

  // Show modal before fetching data
  othersModalInstance.show();

  try {
    const response = await fetch(`${apiUrl}?_=${new Date().getTime()}`);
    if (!response.ok) throw new Error(`Server error: ${response.status}`);
    
    const data = await response.json();
    
    const othersData = data.data.filter(
      item => item.crop_id === cropId && item.management_type === 'othersManagement'
    );

    if (othersData.length === 0) {
      throw new Error('No other management data available for this crop');
    }

    modalContent.innerHTML = `
      <div class="others-management-content">
        ${othersData[0].management_details}
      </div>
    `;

  } catch (error) {
    console.error('Failed to load others data:', error);
    showOthersError(error.message);
  } finally {
    // Ensure modal is properly shown even if there's an error
    othersModalInstance.show();
  }
}

function showOthersError(message) {
  const modalContent = document.querySelector('#othersModal .modal-body .border');
  modalContent.innerHTML = `
    <div class="alert">
      <p>${message}</p>
    </div>
  `;
}
</script>


<script>
document.addEventListener('DOMContentLoaded', async function() {
  try {
    const urlParams = new URLSearchParams(window.location.search);
    const cropId = urlParams.get('crop_id');
    
    if (!cropId) {
      showError('No crop selected. Please select a crop first.');
      return;
    }

    // Show loading state
    const container = document.querySelector('.disease-card');
    container.innerHTML = `
      <div class="col-12 text-center py-5">
        <div class="spinner-border text-success" role="status"></div>
        <p class="mt-2">Loading disease information...</p>
      </div>
    `;

    // Fetch both endpoints in parallel
    const [typesResponse, subTypesResponse] = await Promise.all([
      fetch(`https://cms.ictagriculture.gos.pk/api/crop-disease-types?t=${Date.now()}`),
      fetch(`https://cms.ictagriculture.gos.pk/api/crop-disease-sub-types?t=${Date.now()}`)
    ]);

    if (!typesResponse.ok || !subTypesResponse.ok) {
      throw new Error('Failed to fetch disease data');
    }

    const [typesData, subTypesData] = await Promise.all([
      typesResponse.json(),
      subTypesResponse.json()
    ]);

    // Filter for current crop and validate data
    const cropDiseases = typesData.data?.filter(item => item.crop_id == cropId) || [];
    const allSubTypes = subTypesData.data || [];
    
    if (cropDiseases.length === 0) {
      throw new Error('No disease types available for this crop');
    }

    displayDiseaseData(cropDiseases, allSubTypes);
    
  } catch (error) {
    console.error('Error:', error);
    showError(error.message || 'Failed to load disease data. Please try again later.');
  }
});

// Store modal instances globally
const modalInstances = new Map();

function displayDiseaseData(diseaseTypes, allSubTypes) {
  const container = document.querySelector('.disease-card');
  container.innerHTML = '';

  if (diseaseTypes.length === 0) {
    container.innerHTML = `
      <div class="col-12 text-center py-5">
        <div class="alert alert-info">
          <p>No disease types found for this crop.</p>
        </div>
      </div>
    `;
    return;
  }

  diseaseTypes.forEach(type => {
    // Create card container
    const cardCol = document.createElement('div');
    cardCol.className = 'col-12 col-md-4 col-sm-4 mb-4';

    // Create card
    const card = document.createElement('div');
    card.className = 'card h-100';

    // Card Header (image + title side by side)
    const cardHeader = document.createElement('div');
    cardHeader.className = 'd-flex align-items-center p-3 gap-3';

    // Disease Image
    const img = document.createElement('img');
    img.className = 'pest-img';
    img.alt = type.type_name || 'Disease Image';
    img.src = type.image 
      ? `https://cms.ictagriculture.gos.pk/public/disease/${type.image}`
      : 'https://via.placeholder.com/80?text=No+Image';
    img.style.cssText = 'width:80px; height:80px; object-fit:cover; border-radius:5px;';

    // Disease Title
    const title = document.createElement('h5');
    title.className = 'card-title fw-bold pest-names mb-0';
    title.textContent = type.type_name || 'Unnamed Disease';

    cardHeader.append(img, title);

    // Card Body (sub-types)
    const cardBody = document.createElement('div');
    cardBody.className = 'card-body pt-0';

    const linksContainer = document.createElement('div');
    linksContainer.className = 'fw-bold d-flex flex-column gap-2';

    // Get matching sub-types
    const typeSubTypes = allSubTypes.filter(subType => subType.disease_type_id == type.id);
    
    if (typeSubTypes.length > 0) {
      typeSubTypes.forEach(subType => {
        const link = document.createElement('a');
        link.href = '#';
        link.className = 'text-decoration-none text-white tag11 py-2 text-center';
        link.style.cssText = 'background-color:green;border:none;border-radius:25px;width:200px; padding: 15px !important; padding-left: 15px !important; padding-right: 15px !important;';
        link.textContent = subType.name || 'Unnamed Subtype';
        
        // Create modal ID
        const modalId = `diseaseModal-${type.id}-${subType.id}`;
        link.dataset.bsToggle = 'modal';
        link.dataset.bsTarget = `#${modalId}`;
        
        // Add click handler to load modal content
        link.addEventListener('click', (e) => {
          e.preventDefault();
          showDiseaseDetails(type, subType);
        });
        
        linksContainer.appendChild(link);
      });
    } else {
      const emptyMsg = document.createElement('p');
      emptyMsg.className = 'text-center text-muted';
      emptyMsg.textContent = 'No sub-types available';
      linksContainer.appendChild(emptyMsg);
    }

    cardBody.appendChild(linksContainer);
    card.append(cardHeader, cardBody);
    cardCol.appendChild(card);
    container.appendChild(cardCol);
  });
}

function showDiseaseDetails(type, subType) {
  const modalId = `diseaseModal-${type.id}-${subType.id}`;
  
  // Check if modal already exists
  let modal = document.getElementById(modalId);
  
  if (!modal) {
    // Create new modal
    modal = document.createElement('div');
    modal.className = 'modal fade';
    modal.id = modalId;
    modal.tabIndex = '-1';
    modal.setAttribute('aria-hidden', 'true');
    
    // Format control measures if they exist
    let controlContent = 'No control measures available.';
    if (subType.control) {
      controlContent = subType.control;
      // Convert any escaped HTML back to proper HTML
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = controlContent;
      controlContent = tempDiv.innerHTML;
    }

    modal.innerHTML = `
      <div class="modal-dialog modal-dialog-centered modal-lg modal-custom-lg">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title">${subType.name || 'Disease Details'}</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row palm-row">
              <div class="col-md-4">
                <img src="${subType.image ? `https://cms.ictagriculture.gos.pk/public/disease_subtypes/${subType.image}` : 'https://via.placeholder.com/300?text=No+Image'}" 
                     alt="${subType.name || 'Disease Image'}" 
                     class="img-fluid rounded mb-3 palm-img">
              </div>
              <div class="col-md-8">
                <h6 class="control-h">Control Measures:</h6>
                <div class="control-measures">${controlContent}</div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    `;
    
    document.body.appendChild(modal);
    
    // Initialize and store modal instance
    if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
      const modalInstance = new bootstrap.Modal(modal, {
         // Prevent closing when clicking outside
        keyboard: true     // Allow closing with ESC key
      });
      
      // Store the instance
      modalInstances.set(modalId, modalInstance);
      
      // Clean up when modal is hidden
      modal.addEventListener('hidden.bs.modal', () => {
        modalInstance.dispose();
        modal.remove();
        modalInstances.delete(modalId);
      });
    }
  }
  
  // Show the modal
  const modalInstance = modalInstances.get(modalId);
  if (modalInstance) {
    modalInstance.show();
  }
}

function showError(message) {
  const container = document.querySelector('.disease-card');
  container.innerHTML = `
    <div class="col-12 text-center py-5">
      <div class="alert alert-danger">
        <h5>Error Loading Data</h5>
        <p>${message}</p>
        <button class="btn btn-success mt-2" onclick="window.location.reload()">
          <i class="fas fa-sync-alt"></i> Try Again
        </button>
      </div>
    </div>
  `;
}
</script>
</body>
</html>